{"version":3,"file":"handlers-5a3ab7ea.js","sources":["../../src/js/localStorage.js","../../src/js/state.js","../../src/js/refs.js","../../src/js/helpers.js","../../src/js/render.js","../../src/js/axios-api.js","../../src/js/modal.js","../../src/js/handlers.js"],"sourcesContent":["export function saveToLocalStorage(key, data) {\n  localStorage.setItem(key, JSON.stringify(data));\n}\n\nexport function loadfromLocalStorage(key) {\n  try {\n    return JSON.parse(localStorage.getItem(key));\n  } catch (error) {\n    console.log(error);\n  }\n}\n","import { loadfromLocalStorage } from './localStorage';\n\nexport const state = {\n  favoriteUser: null,\n  favoriteUsers: [],\n  FAVORITES_KEY: 'favorites-users',\n};\n","export const refs = {\n  usersList: document.querySelector('.list-users'),\n  userItem: document.querySelector('.list-user-item'),\n  backdrop: document.querySelector('.backdrop'),\n  modal: document.querySelector('.modal'),\n  favoritesList: document.querySelector('.favorites'),\n};\n","import { loadfromLocalStorage } from './localStorage';\n\nexport function checkUserInLocalStorage(id, key) {\n  const usersInLocalStorage = loadfromLocalStorage(key) ?? [];\n  const userInLS = usersInLocalStorage.find(user => user.id === id);\n  return userInLS === undefined ? false : true;\n}\n","import * as basicLightbox from 'basiclightbox';\nimport 'basiclightbox/dist/basicLightbox.min.css';\n\nimport { refs } from './refs';\nimport { loadfromLocalStorage } from './localStorage';\nimport { state } from './state';\nimport { checkUserInLocalStorage } from './helpers';\n\nexport function renderUsers(users, element) {\n  const markup = users\n    .map(({ id, lastName, firstName, image, phone, email }) => {\n      return `\n      <li class=\"list-user-item\">\n   \n      <img class=\"modal-img\" src=\"${image}\" data-id=${id} width=\"300\">\n      <div class=\"list-user-title\">\n      <h2 class=\"list-user-name\">Firstname: ${firstName}\n    </h2>\n    <h2 class=\"list-user-name\"> Lastname: ${lastName}</h2>\n    <p class=\"list-user-email\">Email: ${email}</p>\n    <p class=\"list-user-phone\">Phone: ${phone}</p>\n  \n    </div>\n      </li>`;\n    })\n    .join('');\n\n  element.innerHTML = markup;\n}\n\n//  Зпробити модалку при кліку на картку і збільшити фото з повною інфою\n// Подія клік з запитом на бєкєнд за 1 юзкром по ід\n// ід на лі повішати пв дата атрибут\n// поковирятисб в обєкті 1го юхера\n// запит на ьєкєнд з dummyJson взяти на 1го юзера\n// отримати посилання і намалювати юзера.\n\nlet instance = null;\n\n// export function renderOneUser(user) {\n//   instance = basicLightbox.create(\n//     `<div class=\"modal\"><img class=\"modal-img\" src=\"${\n//       user.image\n//     }\" width=\"${300}\" height=\"${400}\">\n//     <div class=\"modal-titles\">\n//     <p>FirstName: ${user.firstName}</p>\n//     <p>LastName: ${user.lastName}</p>\n//     <p>MaidenName: ${user.maidenName}</p>\n//     <p>Age: ${user.age}</p>\n//     <p>Email: ${user.email}</p>\n//     <p>Phone: ${user.phone}</p>\n//     <p>Birthdate: ${user.birthDate}</p>\n//     </div>\n//     </div>`\n//   );\n\n//   instance.show();\n// }\n\nexport function renderUserInModal(\n  { image, firstName, lastName, maidenName, age, email, phone, birthDate, id },\n  modal\n) {\n  const isUserInLS = checkUserInLocalStorage(id, state.FAVORITES_KEY);\n\n  const markup = `<div class=\"modal-wrapper\"><img class=\"modal-img\" src=\"${image}\" width=\"${300}\" height=\"${400}\">\n      <div class=\"modal-info\">\n      <p>FirstName: ${firstName}</p>\n      <p>LastName: ${lastName}</p>\n      <p>MaidenName: ${maidenName}</p>\n      <p>Age: ${age}</p>\n      <p>Email: ${email}</p>\n      <p>Phone: ${phone}</p>\n      <p>Birthdate: ${birthDate}</p>\n\n      <button type=\"button\" class=\"add-favorite-btn\">${\n        isUserInLS ? 'Remove from favorite' : 'Add to favorite'\n      }</button>\n      </div>\n      <button class=\"modal-close-btn\">X</button>\n      </div>`;\n  modal.innerHTML = markup;\n}\n// export function onEscClick(e) {\n//   if (e.code === 'Escape' && instance) {\n//     instance.close();\n//     instance = null;\n//   }\n// }\n","import axios from 'axios';\naxios.defaults.baseURL = 'https://dummyjson.com/';\n\nexport function getUsers() {\n  return axios('users?limit=18').then(({ data }) => {\n    return data.users;\n  });\n}\n\nexport function getUserById(id) {\n  return axios(`users/${id}`).then(({ data }) => {\n    return data;\n  });\n}\n","import { onEscPress } from './handlers';\nimport { refs } from './refs';\n\nexport function openModal() {\n  refs.backdrop.classList.remove('is-hidden');\n\n  document.addEventListener('keydown', onEscPress);\n}\n\nexport function closeModal() {\n  refs.backdrop.classList.add('is-hidden');\n  document.removeEventListener('keydown', onEscPress);\n}\n","import { getUserById } from './axios-api';\nimport { saveToLocalStorage, loadfromLocalStorage } from './localStorage';\nimport { closeModal, openModal } from './modal';\nimport { refs } from './refs';\nimport { renderUserInModal, renderUsers } from './render';\nimport { state } from './state';\n\nlet favorite;\n\nexport function onUserListItemClick(e) {\n  if (e.target.nodeName !== 'IMG') {\n    return;\n  }\n\n  const id = e.target.dataset.id;\n\n  getUserById(id).then(user => {\n    state.favoriteUser = user;\n    openModal();\n\n    renderUserInModal(user, refs.modal);\n    favorite = document.querySelector('.add-favorite-btn');\n    favorite.addEventListener('click', onAddToFavBtnClick);\n  });\n}\n\nexport function onBackdropClick(e) {\n  if (e.target === e.currentTarget) {\n    closeModal();\n  }\n  if (e.target.classList.contains('modal-close-btn')) {\n    closeModal();\n  }\n}\n\nexport function onEscPress(e) {\n  if (e.code === 'Escape') {\n    closeModal();\n  }\n}\n\nexport function onAddToFavBtnClick(e) {\n  if (e.target.textContent === 'Add to favorite') {\n    state.favoriteUsers.push(state.favoriteUser);\n    saveToLocalStorage(state.FAVORITES_KEY, state.favoriteUsers);\n    favorite.textContent = 'Remove from favorite';\n    if (window.location.pathname === '/favorites.html') {\n      renderUsers(state.favoriteUsers, refs.favoritesList);\n    }\n  } else {\n    state.favoriteUsers = state.favoriteUsers.filter(\n      user => user.id !== state.favoriteUser.id\n    );\n\n    saveToLocalStorage(state.FAVORITES_KEY, state.favoriteUsers);\n    favorite.textContent = 'Add to favorite';\n    if (window.location.pathname === '/favorites.html') {\n      renderUsers(state.favoriteUsers, refs.favoritesList);\n    }\n  }\n}\n// якшо немає в в localstarage юзкра то в\n// відмалвати в дом як <p>It appears that you haven't added any recipes to your favorites yet. To get started, you can add recipes that you\n// like to your favorites for easier access in the future.</p>\n// і зробити адаптацію для desktop,tablet,mobile\n// і навігацію застилити кпасиво(home,fav) і\n// Зробити підсвітку кнопки активної сторінки\n"],"names":["saveToLocalStorage","key","data","loadfromLocalStorage","error","state","refs","checkUserInLocalStorage","id","user","renderUsers","users","element","markup","lastName","firstName","image","phone","email","renderUserInModal","maidenName","age","birthDate","modal","isUserInLS","axios","getUsers","getUserById","openModal","onEscPress","closeModal","favorite","onUserListItemClick","onAddToFavBtnClick","onBackdropClick"],"mappings":"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"}